@using XClaim.Web.Shared.States
@implements IDisposable
@inject AppState AppState
@inject ThemeState ThemeState

@code {
    protected override void OnInitialized() {
        base.OnInitialized();
        AppState.OnChange += StateHasChanged;
        ThemeState.OnChange += StateHasChanged;
    }

    public void Dispose() {
        AppState.OnChange -= StateHasChanged;
        ThemeState.OnChange -= StateHasChanged;
    }
}

<MudAppBar Elevation="3">
    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="AppState.ToggleSidebar" />
    <MudText Class="text-white" Typo="Typo.h5" Inline="true">@AppState.LayoutTitle</MudText>
    <MudSpacer />
    @if (ThemeState.IsLightMode) {
        <MudIconButton Icon="@Icons.Material.Filled.Brightness4" Color="Color.Inherit" OnClick="ThemeState.ToggleTheme" />
    } else {
        <MudIconButton Icon="@Icons.Material.Filled.Brightness5" Color="Color.Inherit" OnClick="ThemeState.ToggleTheme" />
    }
    
    <MudMenu FullWidth="true">
        <ActivatorContent>
            <MudBadge Color="Color.Success" Class="mx-2" Overlap="true" Bordered="true">
                <MudAvatar>SA</MudAvatar>
            </MudBadge>
        </ActivatorContent>
        <ChildContent>
            <MudMenuItem>Profile</MudMenuItem>
            <MudMenuItem>Bank</MudMenuItem>
            <MudMenuItem>Sign Out</MudMenuItem>
        </ChildContent>
    </MudMenu>
</MudAppBar>